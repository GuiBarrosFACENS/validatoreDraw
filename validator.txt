09:28:07.650[    main] INFO  s.m.d.u.i.FileSegmentsBuilderUseCaseImpl  :  :  : Processing line: 03300225         0169901451910081444183736426000000000000000000000000000000000000000000000000000000000000000000000000000033                                                                                                                     
09:28:08.208[    main] INFO    c.s.m.infra.logger.LoggerChuckListener  :  :  : Error during chunk processing: mergeInvoiceSegmentsLinesStep
09:28:08.210[    main] ERROR         o.s.batch.core.step.AbstractStep  :  :  : Encountered an error executing step mergeInvoiceSegmentsLinesStep in job processJob
java.lang.NullPointerException: Cannot invoke "java.util.List.forEach(java.util.function.Consumer)" because "linesByKey" is null
	at com.santander.mpa.domain.usecase.impl.FileSegmentsBuilderUseCaseImpl.buildLineByKey(FileSegmentsBuilderUseCaseImpl.java:100)
	at com.santander.mpa.domain.usecase.impl.FileSegmentsBuilderUseCaseImpl.processLine(FileSegmentsBuilderUseCaseImpl.java:67)
	at com.santander.mpa.app.service.processors.FileSegmentsProcessorService.process(FileSegmentsProcessorService.java:21)
	at com.santander.mpa.app.service.processors.FileSegmentsProcessorService.process(FileSegmentsProcessorService.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:146)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:322)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:220)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:75)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:388)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:312)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:255)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:369)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:206)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:240)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:229)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:153)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:418)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:132)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:317)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:157)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:148)
	at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:210)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:194)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:174)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:169)
09:28:08.213[    main] INFO   c.s.mpa.infra.logger.LoggerStepListener  :  :  : Step has completed with status: FAILED
09:28:08.217[    main] INFO          o.s.batch.core.step.AbstractStep  :  :  : Step: [mergeInvoiceSegmentsLinesStep] executed in 2m7s939ms
09:28:08.228[    main] INFO       o.s.b.c.l.support.SimpleJobLauncher  :  :  : Job: [SimpleJob: [name=processJob]] completed with the following parameters: [{'run.id':'{value=1, type=class java.lang.Long, identifying=true}'}] and the following status: [FAILED] in 2m7s967ms
09:28:08.250[    main] INFO        com.zaxxer.hikari.HikariDataSource  :  :  : HikariPool-1 - Shutdown initiated...
09:28:08.253[    main] INFO        com.zaxxer.hikari.HikariDataSource  :  :  : HikariPool-1 - Shutdown completed.
Disconnected from the target VM, address: '127.0.0.1:65369', transport: 'socket'

Process finished with exit code 5
