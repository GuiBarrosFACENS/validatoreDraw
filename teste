package com.santander.mpa.app.service.processors;

import com.santander.extractor.utils.ExtractorAdvice;
import com.santander.mpa.app.dto.InvoicePaymentFileDTO;
import com.santander.mpa.app.mapper.InvoicePaymentFileMapper;
import com.santander.mpa.domain.entity.InvoicePaymentFile;
import lombok.AllArgsConstructor;
import org.jetbrains.annotations.NotNull;
import org.springframework.batch.item.ItemProcessor;
import org.springframework.stereotype.Service;

@Service
@AllArgsConstructor
public class ItemProcessorCustomService
    implements ItemProcessor<InvoicePaymentFileDTO, InvoicePaymentFile> {

  private final InvoicePaymentFileMapper invoicePaymentFileMapper;
  private final ExtractorAdvice extractor;

  @Override
  public InvoicePaymentFile process(@NotNull InvoicePaymentFileDTO invoicePaymentFileDTO) {
    ExtractorAdvice.put("data.data.mapAttributes.process", "process cnab");
    extractor.execute("telemetria_log_category");
    return this.invoicePaymentFileMapper.toEntity(invoicePaymentFileDTO);
  }
}


---

