package com.santander.mpa.domain.usecase.impl;

import com.santander.mpa.domain.usecase.CreateFileUseCase;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.nio.file.Path;
import java.nio.file.Paths;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class CreateFileUseCaseImpl implements CreateFileUseCase {
  private static final Logger logger = LoggerFactory.getLogger(CreateFileUseCaseImpl.class);

  @Override
  public void createFile(String fileName, StringBuilder fileLines) throws IOException {
    Path path = Paths.get(fileName);
    File file = path.toFile();

    if (!file.exists()) {
      boolean created = file.createNewFile();
      if (created) {
        logger.info("File created successfully at path: ({}).", fileName);
      } else logger.debug("File already exists at path ({}).", fileName);
    } else {
      logger.debug("File already exists at path: ({}).", fileName);
    }

    try (BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(file, true))) {
      bufferedWriter.write(fileLines.toString());
    }
  }
}
