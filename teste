@Test
void sendThrowsException() throws JsonProcessingException {
    when(kafkaTemplate.send(mockProducerRecord())).thenThrow(new KafkaException("Kafka send failed"));

    assertDoesNotThrow(() -> kafkaProvider.send(invoicePaymentFile));

    verify(kafkaTemplate, Mockito.times(1)).send(mockProducerRecord());

    // Se estiver usando LogCaptor:
    // LogCaptor logCaptor = LogCaptor.forClass(KafkaProvider.class);
    // assertTrue(logCaptor.getErrorLogs().stream().anyMatch(log -> log.contains("Error sending message to Kafka")));
}
